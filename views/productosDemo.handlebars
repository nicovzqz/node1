{{#> layout}}
<div class="container mt-5">
    <div class="alert alert-info" role="alert">
        </div>

    <h1 class="mb-4">
        <i class="fas fa-shopping-bag"></i> Catálogo de Productos 
    </h1>

    <!-- Filtros -->
    <div class="row mb-4">
        <div class="col-md-12">
            <form method="GET" class="form-inline">
                <div class="form-group mr-3">
                    <label for="limit" class="mr-2">Elementos por pgina:</label>
                    <select name="limit" id="limit" class="form-control" onchange="this.form.submit()">
                        <option value="5" {{#eq limit 5}}selected{{/eq}}>5</option>
                        <option value="10" {{#eq limit 10}}selected{{/eq}}>10</option>
                        <option value="20" {{#eq limit 20}}selected{{/eq}}>20</option>
                    </select>
                </div>
                <div class="form-group mr-3">
                    <label for="sort" class="mr-2">Ordenar por precio:</label>
                    <select name="sort" id="sort" class="form-control" onchange="this.form.submit()">
                        <option value="">Sin ordenar</option>
                        <option value="asc" {{#eq sort 'asc'}}selected{{/eq}}>Menor a Mayor</option>
                        <option value="desc" {{#eq sort 'desc'}}selected{{/eq}}>Mayor a Menor</option>
                    </select>
                </div>
            </form>
        </div>
    </div>

    <!-- Grid de Productos Demo -->
    <div class="row">
        <div class="col-md-4 mb-4">
            <div class="card h-100">
                <img src="https://via.placeholder.com/300x200?text=Laptop+Gaming" class="card-img-top" alt="Laptop Gaming">
                <div class="card-body">
                    <h5 class="card-title">Laptop Gaming</h5>
                    <p class="card-text text-muted">Laptop de última generación para gaming profesional</p>
                    <p class="card-text"><strong>Categoría:</strong> Electrónicos</p>
                    <div class="d-flex justify-content-between align-items-center">
                        <span class="badge badge-success">Stock: 10</span>
                        <h5 class="text-primary mb-0">$2.000.000</h5>
                    </div>
                </div>
                <div class="card-footer bg-light">
                    <a href="/products/example1" class="btn btn-sm btn-info mr-2">
                        <i class="fas fa-eye"></i> Ver Detalle
                    </a>
                    <button class="btn btn-sm btn-success" onclick="addToCart('example1', 'Laptop Gaming', 2000000)">
                        <i class="fas fa-cart-plus"></i> Carrito
                    </button>
                </div>
            </div>
        </div>

        <div class="col-md-4 mb-4">
            <div class="card h-100">
                <img src="https://via.placeholder.com/300x200?text=Mouse+Gaming" class="card-img-top" alt="Mouse">
                <div class="card-body">
                    <h5 class="card-title">Mouse Inalámbrico</h5>
                    <p class="card-text text-muted">Mouse gaming con RGB y 8000 DPI</p>
                    <p class="card-text"><strong>Categoría:</strong> Accesorios</p>
                    <div class="d-flex justify-content-between align-items-center">
                        <span class="badge badge-success">Stock: 25</span>
                        <h5 class="text-primary mb-0">$50.000</h5>
                    </div>
                </div>
                <div class="card-footer bg-light">
                    <a href="/products/example2" class="btn btn-sm btn-info mr-2">
                        <i class="fas fa-eye"></i> Ver Detalle
                    </a>
                    <button class="btn btn-sm btn-success" onclick="addToCart('example2', 'Mouse', 50000)">
                        <i class="fas fa-cart-plus"></i> Carrito
                    </button>
                </div>
            </div>
        </div>

        <div class="col-md-4 mb-4">
            <div class="card h-100">
                <img src="https://via.placeholder.com/300x200?text=Teclado+Mecanico" class="card-img-top" alt="Teclado">
                <div class="card-body">
                    <h5 class="card-title">Teclado Mecánico</h5>
                    <p class="card-text text-muted">Teclado RGB con switches Cherry MX</p>
                    <p class="card-text"><strong>Categoría:</strong> Accesorios</p>
                    <div class="d-flex justify-content-between align-items-center">
                        <span class="badge badge-success">Stock: 15</span>
                        <h5 class="text-primary mb-0">$150.000</h5>
                    </div>
                </div>
                <div class="card-footer bg-light">
                    <a href="/products/example3" class="btn btn-sm btn-info mr-2">
                        <i class="fas fa-eye"></i> Ver Detalle
                    </a>
                    <button class="btn btn-sm btn-success" onclick="addToCart('example3', 'Teclado', 150000)">
                        <i class="fas fa-cart-plus"></i> Carrito
                    </button>
                </div>
            </div>
        </div>

        <div class="col-md-4 mb-4">
            <div class="card h-100">
                <img src="https://via.placeholder.com/300x200?text=Monitor+4K" class="card-img-top" alt="Monitor">
                <div class="card-body">
                    <h5 class="card-title">Monitor 4K 27"</h5>
                    <p class="card-text text-muted">Monitor 4K de 27 pulgadas con 144Hz</p>
                    <p class="card-text"><strong>Categoría:</strong> Electrónicos</p>
                    <div class="d-flex justify-content-between align-items-center">
                        <span class="badge badge-success">Stock: 8</span>
                        <h5 class="text-primary mb-0">$800.000</h5>
                    </div>
                </div>
                <div class="card-footer bg-light">
                    <a href="/products/example4" class="btn btn-sm btn-info mr-2">
                        <i class="fas fa-eye"></i> Ver Detalle
                    </a>
                    <button class="btn btn-sm btn-success" onclick="addToCart('example4', 'Monitor', 800000)">
                        <i class="fas fa-cart-plus"></i> Carrito
                    </button>
                </div>
            </div>
        </div>

        <div class="col-md-4 mb-4">
            <div class="card h-100">
                <img src="https://via.placeholder.com/300x200?text=Auriculares" class="card-img-top" alt="Auriculares">
                <div class="card-body">
                    <h5 class="card-title">Auriculares Wireless</h5>
                    <p class="card-text text-muted">Cancelación de ruido activa</p>
                    <p class="card-text"><strong>Categoría:</strong> Audio</p>
                    <div class="d-flex justify-content-between align-items-center">
                        <span class="badge badge-success">Stock: 20</span>
                        <h5 class="text-primary mb-0">$200.000</h5>
                    </div>
                </div>
                <div class="card-footer bg-light">
                    <a href="/products/example5" class="btn btn-sm btn-info mr-2">
                        <i class="fas fa-eye"></i> Ver Detalle
                    </a>
                    <button class="btn btn-sm btn-success" onclick="addToCart('example5', 'Auriculares', 200000)">
                        <i class="fas fa-cart-plus"></i> Carrito
                    </button>
                </div>
            </div>
        </div>

        <div class="col-md-4 mb-4">
            <div class="card h-100">
                <img src="https://via.placeholder.com/300x200?text=Mousepad" class="card-img-top" alt="Mousepad">
                <div class="card-body">
                    <h5 class="card-title">Mousepad Grande</h5>
                    <p class="card-text text-muted">Mousepad gaming de superficie lisa</p>
                    <p class="card-text"><strong>Categoría:</strong> Accesorios</p>
                    <div class="d-flex justify-content-between align-items-center">
                        <span class="badge badge-success">Stock: 30</span>
                        <h5 class="text-primary mb-0">$30.000</h5>
                    </div>
                </div>
                <div class="card-footer bg-light">
                    <a href="/products/example6" class="btn btn-sm btn-info mr-2">
                        <i class="fas fa-eye"></i> Ver Detalle
                    </a>
                    <button class="btn btn-sm btn-success" onclick="addToCart('example6', 'Mousepad', 30000)">
                        <i class="fas fa-cart-plus"></i> Carrito
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Paginación Demo -->
    <nav aria-label="Page navigation">
        <ul class="pagination justify-content-center mt-5">
            <li class="page-item"><a class="page-link" href="?page=1">Anterior</a></li>
            <li class="page-item active"><a class="page-link" href="?page=1">1</a></li>
            <li class="page-item"><a class="page-link" href="?page=2">2</a></li>
            <li class="page-item"><a class="page-link" href="?page=3">3</a></li>
            <li class="page-item"><a class="page-link" href="?page=2">Siguiente</a></li>
        </ul>
    </nav>
</div>

<script>
    function addToCart(id, name, price) {
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        const item = { id, name, price, quantity: 1 };
        
        const existing = cart.find(p => p.id === id);
        if (existing) {
            existing.quantity += 1;
        } else {
            cart.push(item);
        }
        
        localStorage.setItem('cart', JSON.stringify(cart));
        alert(`✅ ${name} agregado al carrito!`);
    }
</script>
{{/layout}}
